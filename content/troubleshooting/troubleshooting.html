<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Troubleshoot Edge Data Store </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Troubleshoot Edge Data Store ">
    <meta name="generator" content="docfx 2.59.1.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../../content/index.html" width="46">
                <img id="logo" src="../../content/images/atlas_icon.png" height="46" width="46" alt="OSIsoft Edge Data Store"> 
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="troubleShooting">
<h1 id="troubleshoot-edge-data-store">Troubleshoot Edge Data Store</h1>

<p>Edge Data Store includes both local and remote means of diagnosing issues encountered while using or developing against EDS.</p>
<p>Edge Data Store supports a diagnostics namespace that stores streams containing diagnostic information from Edge Data Store itself. Egress this data to either a PI Server or AVEVA Data Hub to monitor the state of a system remotely. For details about egressing diagnostic data, see <a class="xref" href="../diagnostics/diagnostics.html">Diagnostics configuration</a>.</p>
<p>In addition to diagnostics data, all components in Edge Data Store support OMF health messages. Configure health messages to send health data to either PI Server or AVEVA Data Hub endpoints for remote monitoring of devices. For more information, see <a class="xref" href="../configuration/system-health-endpoints-configuration.html">Health endpoints configuration</a>.</p>
<h2 id="omf-ingress">OMF ingress</h2>
<p>When a custom application fails to write stream data to EDS:</p>
<ol>
<li><p>Verify the custom application is sending OMF messages in the correct order: 1) OMF type, 2) OMF container, 3) OMF data.</p>
<p><strong>Note:</strong> OMF messages must be sent in the correct order to be ingressed into Edge Data Store.</p>
</li>
<li><p>Refer to logging of warnings, errors, and messages for help with diagnosing these issues.</p>
</li>
</ol>
<h3 id="omf-ingress-logging">OMF ingress logging</h3>
<p>Ingress logging messages provide a record of ingress events. To capture the most information for troubleshooting:</p>
<ol>
<li><p>Refer to <a class="xref" href="../logging/logging-configuration.html">Configure logging</a> to set logging parameters.</p>
</li>
<li><p>For maximum message logging information, set the log level to <code>Trace</code>.</p>
</li>
</ol>
<h3 id="omf-ingress-message-debugging">OMF ingress message debugging</h3>
<p>Every incoming OMF message logs a request and response log file. Log files are located in the following location and grouped by the associated OMF message type:</p>
<p><code>C:\ProgramData\OSIsoft\EdgeDataStore\Logs\IngressDebugLogs\</code></p>
<p>Each log file leverages the following filename format:</p>
<p><code>{ticks}-{operationId}-{Request/Response}.txt</code></p>
<p>Use debugging information to troubleshoot problems between an OMF application and Edge Data Store. To enable debugging:</p>
<ol>
<li><p>Refer to <a class="xref" href="../configuration/storage-runtime-config.html">Storage runtime configuration</a> to enable debugging.</p>
</li>
<li><p>Set an appropriate time value for the <strong>IngressDebugExpiration</strong> property.</p>
<p><strong>Note:</strong> You can also disable debugging by setting the expiration value to <code>null</code>.</p>
</li>
</ol>
<p>Date and time strings should use the following formats:</p>
<ul>
<li><p>UTC: <code>yyyy-mm-ddThh:mm:ssZ</code></p>
</li>
<li><p>Local: <code>yyyy-mm-ddThh:mm:ss</code></p>
</li>
</ul>
<h2 id="egress">Egress</h2>
<p>EDS egress extracts data from SDS streams and sends the appropriate sequences of type, container, and data OMF messages on startup.  </p>
<p>If unexpected data appears in an AVEVA Data Hub or PI System, check if multiple devices are writing to the same SDS stream. To check egress configuration:</p>
<ol>
<li><p>Check all egress configuration files in Edge Data Store to verify whether any endpoints are duplicated. A duplicate endpoint means that more than one device is egressing data to it, resulting in unexpected data.</p>
</li>
<li><p>Assign stream prefixes in the periodic egress configuration to ensure that output data streams are logically separated in the systems of record. For instructions, see <a class="xref" href="../egress/configure-data-egress.html">Configure data egress</a>.</p>
<p><strong>Note:</strong> Type prefixes may be helpful if you have changed a stream type definition on EDS. OMF types on both AVEVA Data Hub and the PI System are immutable once created. If the type of the data stream changes, it is best to either delete the old type definition (if nothing is still using it) or add a type prefix to create a new unique type that will be used by new streams egressing from EDS to the systems of record.</p>
</li>
</ol>
<h3 id="egress-logging">Egress logging</h3>
<p>Egress logging messages provide a record of egress events. To capture maximum information for troubleshooting:</p>
<ol>
<li><p>Refer to <a class="xref" href="../logging/logging-configuration.html">Configure logging</a> to set logging parameters.</p>
</li>
<li><p>For maximum message logging information, set the log level to <code>Trace</code>.</p>
</li>
</ol>
<h3 id="egress-debugging">Egress debugging</h3>
<p>Use debugging information to troubleshoot problems between Edge Data Store and the egress destination. To enable debugging:</p>
<ol>
<li><p>Refer to <a class="xref" href="../egress/egress.html">Data egress configuration</a> to enable debugging.</p>
</li>
<li><p>Set an appropriate time value for the <strong>DebugExpiration</strong> property.</p>
<p><strong>Note:</strong> Disable debugging by setting the expiration value to <code>null</code>.</p>
</li>
</ol>
<p>Date and time strings should use the following formats:</p>
<ul>
<li><p>UTC: <code>yyyy-mm-ddThh:mm:ssZ</code></p>
</li>
<li><p>Local: <code>yyyy-mm-ddThh:mm:ss</code></p>
</li>
</ul>
<h3 id="debugging-folderfile-structure">Debugging folder/file structure</h3>
<p>Debug folders and files are created under the Edge Data Store folder as follows:</p>
<p>   Windows: <code>%programdata%\OSIsoft\EdgeDataStore\Logs\EgressDebugLogs\Data\{egressType}\{egressId}\{omfType}\{Ticks}-{Guid}-{Request/Response}.txt</code></p>
<p>   Linux: <code>/usr/share/OSIsoft/EdgeDataStore/Logs/EgressDebugLogs/Data{egressType}/{egressId}/{omfType}/{Ticks}-{Guid}-{Request/Response}.txt</code></p>
<p>The OMF specific elements of the file structure are defined in the following table.</p>
<table>
<thead>
<tr>
<th>Element</th>
<th>Represents</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>omfType</em></td>
<td>The OMF message type: Type, Container, or Data.</td>
</tr>
<tr>
<td><em>Ticks</em></td>
<td>The time in milliseconds (tick count) for UTC DateTime when determined message would be written to disk.</td>
</tr>
<tr>
<td><em>Guid</em></td>
<td>The unique GUID for each request/response pair.</td>
</tr>
<tr>
<td><em>Req/Res</em></td>
<td>Whether the message was HTTP request or response.</td>
</tr>
</tbody>
</table>
<h2 id="additional-resources">Additional resources</h2>
<p>For information about specific log messages and possible resolutions, refer to the <a href="https://my.osisoft.com/">AVEVA Customer Portal</a>.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/osisoft/Edge-Data-Store-Docs/blob/main/content/troubleshooting/troubleshooting.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span><a href="https://www.osisoft.com/copyright/">© 2019 - 2021 OSIsoft, LLC. All rights reserved.</a></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
