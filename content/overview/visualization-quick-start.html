<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Edge Data Store visualization quick start </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Edge Data Store visualization quick start ">
    <meta name="generator" content="docfx 2.59.1.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../../content/index.html" width="46">
                <img id="logo" src="../../content/images/atlas_icon.png" height="46" width="46" alt="OSIsoft Edge Data Store"> 
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="visualizationQuickStart">
<h1 id="edge-data-store-visualization-quick-start">Edge Data Store visualization quick start</h1>

<p>This topic provides a quick start for displaying data from the EDS storage component on the local device where Edge Data Store is installed. The following example should run on any device supported by Edge Data Store, and iterates through all streams in the default namespace, continually displaying the latest values to the screen.</p>
<pre><code class="lang-csharp">using System;
using System.Collections.Generic;
using System.Net.Http;
using Newtonsoft.Json;

namespace EdgeDataScroller
{
    class EdgeStream
    {
        public string Id { get; set; }
    }
    class DataScroller
    {
        static HttpClient _client = new HttpClient();

        private static Dictionary&lt;string, Dictionary&lt;string, object&gt;&gt; GetDataForNamespace(string ns)
        {
            Dictionary&lt;string, Dictionary&lt;string, object&gt;&gt; outputs = new Dictionary&lt;string, Dictionary&lt;string, object&gt;&gt;();
            string uri = string.Format(&quot;http://localhost:5590/api/v1/tenants/default/namespaces/{0}/streams&quot;, ns);
            string json = _client.GetStringAsync(uri).Result;
            List&lt;EdgeStream&gt; streams = JsonConvert.DeserializeObject&lt;List&lt;EdgeStream&gt;&gt;(json);
            foreach (var stream in streams)
            {
                string lastValueUri = string.Format(&quot;http://localhost:5590/api/v1/tenants/default/namespaces/{0}/streams/{1}/Data/Last&quot;, ns, stream.Id.Trim());
                string lastValueJson = _client.GetStringAsync(lastValueUri).Result;
                Dictionary&lt;string, object&gt; values = JsonConvert.DeserializeObject&lt;Dictionary&lt;string, object&gt;&gt;(lastValueJson);
                outputs.Add(stream.Id.Trim(), values);
            }
            return outputs;
        }

        static void DisplayData(List&lt;string&gt; namespaces, TimeSpan interval)
        {
            Dictionary&lt;string, Dictionary&lt;string, Dictionary&lt;string, object&gt;&gt;&gt; outputs = new Dictionary&lt;string, Dictionary&lt;string, Dictionary&lt;string, object&gt;&gt;&gt;();
            Console.WriteLine(&quot;Data Displayed at &quot; + DateTime.UtcNow.ToString(&quot;o&quot;));
            foreach (string ns in namespaces)
            {
                outputs.Add(ns, GetDataForNamespace(ns));
            }
            foreach (string ns in outputs.Keys)
            {
                foreach (string stream in outputs[ns].Keys)
                {
                    if (null == outputs[ns][stream])
                    {
                        Console.WriteLine(&quot;No values for &quot; + stream);
                        continue;
                    }
                    foreach (string field in outputs[ns][stream].Keys)
                    {
                        object obj = outputs[ns][stream][field];
                        string value = obj.ToString();
                        if (obj is DateTime)
                        {
                            value = ((DateTime)obj).ToString(&quot;o&quot;);
                        }
                        Console.WriteLine($&quot;{ns}.{stream}.{field} = {value}&quot;);
                    }
                }
                Console.WriteLine(&quot;****&quot;);
            }
            Console.WriteLine(string.Empty);
            System.Threading.Thread.Sleep(interval);
        }

        static void Main(string[] args)
        {
            List&lt;string&gt; namespaces = new List&lt;string&gt;();
            namespaces.Add(&quot;default&quot;);
            TimeSpan interval = TimeSpan.FromSeconds(5.0);
            if (null != args &amp;&amp; args.Length &gt; 0)
            {
                string choice = args[0].Trim().ToLowerInvariant();
                if (choice == &quot;all&quot;)
                {
                    namespaces.Add(&quot;diagnostics&quot;);
                }
                if (choice == &quot;diagnostics&quot;)
                {
                    namespaces.Clear();
                    namespaces.Add(&quot;diagnostics&quot;);
                }
                if (args.Length &gt; 1)
                {
                    string newInterval = args[1].Trim();
                    double newValue = -1.0;
                    if (double.TryParse(newInterval, out newValue))
                    {
                        interval = TimeSpan.FromSeconds(newValue);
                    }
                }
            }
            while (true) DisplayData(namespaces, interval);
        }
    }
}
</code></pre></article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/osisoft/Edge-Data-Store-Docs/blob/main/content/overview/visualization-quick-start.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span><a href="https://www.osisoft.com/copyright/">© 2019 - 2021 OSIsoft, LLC. All rights reserved.</a></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
